(self.webpackChunktest=self.webpackChunktest||[]).push([[420],{420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AllProductModule:()=>M});var o=r(1116),i=r(3146),n=r(5959),s=r(6673),c=r(8569);function d(e,t=c.P){return r=>r.lift(new a(e,t))}class a{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new u(e,this.dueTime,this.scheduler))}}class u extends s.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function l(e){e.debouncedNext()}function g(e,t){return r=>r.lift(new h(e,t))}class h{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new p(e,this.compare,this.keySelector))}}class p extends s.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:e}=this;r=e(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var Z=r(5614),m=r(8315),T=r(1462);function A(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"tr"),Z.TgZ(1,"td"),Z._UZ(2,"img",47),Z.qZA(),Z.TgZ(3,"td"),Z._uU(4),Z.qZA(),Z.TgZ(5,"td"),Z._uU(6),Z.qZA(),Z.TgZ(7,"td"),Z._uU(8),Z.qZA(),Z.TgZ(9,"td"),Z._uU(10),Z.qZA(),Z.TgZ(11,"td"),Z._uU(12),Z.qZA(),Z.TgZ(13,"td"),Z._uU(14),Z.qZA(),Z.TgZ(15,"td"),Z._uU(16),Z.qZA(),Z.TgZ(17,"td"),Z._uU(18),Z.qZA(),Z.TgZ(19,"td"),Z.TgZ(20,"div",48),Z.TgZ(21,"button",49),Z.NdJ("click",function(){const t=Z.CHM(e).$implicit;return Z.oxw().getData(t.name,t.description,t.price,t.stock,null==t.category?null:t.category.name,t.image,t._id)}),Z._UZ(22,"i",50),Z.qZA(),Z.TgZ(23,"button",51),Z.NdJ("click",function(){const t=Z.CHM(e).$implicit;return Z.oxw().openConfirmModal(t._id)}),Z._UZ(24,"i",52),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){const e=t.$implicit;Z.xp6(2),Z.Q6J("src",e.image,Z.LSH),Z.xp6(2),Z.Oqu(e.name),Z.xp6(2),Z.Oqu(e.description),Z.xp6(2),Z.hij("",e.price,"DT"),Z.xp6(2),Z.Oqu(e.stock),Z.xp6(2),Z.Oqu(e.stock>0?"En Stock":"Rupture de stock"),Z.xp6(2),Z.Oqu(null==e.category?null:e.category.name),Z.xp6(2),Z.Oqu(e.createdAt),Z.xp6(2),Z.Oqu(e.updatedAt)}}function f(e,t){1&e&&(Z.TgZ(0,"tr"),Z.TgZ(1,"td",53),Z._uU(2,"Aucun produit trouv\xe9"),Z.qZA(),Z.qZA())}function b(e,t){if(1&e&&(Z.TgZ(0,"div",54),Z._uU(1),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(1),Z.hij(" ",e.messageSuccess," ")}}function q(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"div",55),Z.TgZ(1,"div",56),Z.TgZ(2,"p"),Z._uU(3,"Voulez-vous supprimer ce produit ?"),Z.qZA(),Z.TgZ(4,"div",57),Z.TgZ(5,"button",58),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw().confirmDelete()}),Z._uU(6,"Oui"),Z.qZA(),Z.TgZ(7,"button",59),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw().cancelDelete()}),Z._uU(8,"Non"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}}const y=[{path:"",component:(()=>{class e{constructor(e,t){this.produitService=e,this.datePipe=t,this.produits=[],this.allProduits=[],this.dataArray=[],this.searchTerm="",this.categorySearchTerm="",this.searchTerms=new n.xQ,this.categorySearchTerms=new n.xQ,this.showConfirmModal=!1,this.produitIdToDelete="",this.categories=[],this.selectedProduct={name:"",description:"",price:0,stock:0,category:{name:""},image:"",id:""},this.messageSuccess=""}ngOnInit(){this.getAllProduits(),this.getAllCategories(),this.searchTerms.pipe(d(300),g()).subscribe(e=>{this.applyFilters()}),this.categorySearchTerms.pipe(d(300),g()).subscribe(e=>{this.applyFilters()})}onSearch(e){this.searchTerm=e,this.searchTerms.next(e)}onCategorySearch(e){this.categorySearchTerm=e,this.categorySearchTerms.next(e)}applyFilters(){if(!this.searchTerm.trim()&&!this.categorySearchTerm.trim())return void(this.produits=[...this.allProduits]);let e=[...this.allProduits];this.searchTerm.trim()&&(e=e.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.categorySearchTerm.trim()&&(e=e.filter(e=>e.category&&e.category.name.toLowerCase().includes(this.categorySearchTerm.toLowerCase()))),this.produits=e}getAllProduits(){this.produitService.getAllproduit().subscribe(e=>{this.allProduits=e.map(e=>(e.createdAt=this.datePipe.transform(e.createdAt,"dd/MM/yyyy HH:mm:ss"),e.updatedAt=this.datePipe.transform(e.updatedAt,"dd/MM/yyyy HH:mm:ss"),e)),this.produits=[...this.allProduits]},e=>{console.error("Erreur lors du chargement des produits",e)})}getAllCategories(){this.produitService.getAllcategory().subscribe(e=>{this.categories=e},e=>{console.error("Erreur lors du chargement des cat\xe9gories",e)})}deleteProduit(e){this.produitService.Deleteproduit(e).subscribe(()=>{this.getAllProduits()},e=>{console.error("Erreur lors de la suppression du produit",e)})}getData(e,t,r,o,i,n,s){this.messageSuccess="",this.selectedProduct={name:e,description:t,price:r,stock:o,category:{name:i},image:n,id:s}}updateProduct(e){this.produitService.Updateproduit(this.selectedProduct.id,e.value).subscribe(e=>{this.messageSuccess=`Le produit ${this.selectedProduct.name} a \xe9t\xe9 mis \xe0 jour avec succ\xe8s.`,this.getAllProduits(),console.log(e)},e=>{console.error("Erreur lors de la mise \xe0 jour du produit",e)})}openConfirmModal(e){this.produitIdToDelete=e,this.showConfirmModal=!0}confirmDelete(){this.deleteProduit(this.produitIdToDelete),this.showConfirmModal=!1}cancelDelete(){this.produitIdToDelete="",this.showConfirmModal=!1}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(m.d),Z.Y36(o.uU))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-listeproduit"]],features:[Z._Bn([o.uU])],decls:94,vars:12,consts:[[1,"container-fluid"],[1,"h3","mb-4","text-gray-800"],[1,"row","mb-4"],[1,"col-md-5"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Rechercher Par Produit...",1,"form-control","bg-light","border-0","small",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["type","button",1,"btn","btn-primary"],[1,"fas","fa-search","fa-sm"],["type","text","placeholder","Rechercher par cat\xe9gorie...",1,"form-control","bg-light","border-0","small",3,"ngModel","ngModelChange","input"],[1,"col-md-2"],["routerLink","/admin/addproduit",1,"btn","btn-success","w-100"],[1,"fas","fa-plus","mr-2"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","name"],["type","text","placeholder","name","required","","minlength","2","maxlength","20","name","name","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],["for","description"],["type","text","placeholder","Description","required","","name","description","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["for","price"],["type","number","placeholder","price","required","","name","price","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["for","stock"],["type","number","placeholder","stock","required","","name","stock","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["for","category"],["type","text","name","category","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["class","alert alert-success",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["class","confirmation-overlay",4,"ngIf"],["alt","Image","width","50",3,"src"],[1,"btn-group"],["data-toggle","modal","data-target","#exampleModal",1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","10",1,"text-center"],[1,"alert","alert-success"],[1,"confirmation-overlay"],[1,"confirmation-box"],[1,"text-center"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"div",0),Z.TgZ(1,"h1",1),Z._uU(2,"Liste des Produits"),Z.qZA(),Z.TgZ(3,"div",2),Z.TgZ(4,"div",3),Z.TgZ(5,"div",4),Z.TgZ(6,"div",5),Z.TgZ(7,"span",6),Z._uU(8,"Produit"),Z.qZA(),Z.qZA(),Z.TgZ(9,"input",7),Z.NdJ("ngModelChange",function(e){return t.searchTerm=e})("input",function(){return t.onSearch(t.searchTerm)}),Z.qZA(),Z.TgZ(10,"div",8),Z.TgZ(11,"button",9),Z._UZ(12,"i",10),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(13,"div",3),Z.TgZ(14,"div",4),Z.TgZ(15,"div",5),Z.TgZ(16,"span",6),Z._uU(17,"Cat\xe9gorie"),Z.qZA(),Z.qZA(),Z.TgZ(18,"input",11),Z.NdJ("ngModelChange",function(e){return t.categorySearchTerm=e})("input",function(){return t.onCategorySearch(t.categorySearchTerm)}),Z.qZA(),Z.TgZ(19,"div",8),Z.TgZ(20,"button",9),Z._UZ(21,"i",10),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"div",12),Z.TgZ(23,"button",13),Z._UZ(24,"i",14),Z._uU(25,"Nouveau produit "),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(26,"div",15),Z.TgZ(27,"div",16),Z.TgZ(28,"table",17),Z.TgZ(29,"thead"),Z.TgZ(30,"tr"),Z.TgZ(31,"th"),Z._uU(32,"Image"),Z.qZA(),Z.TgZ(33,"th"),Z._uU(34,"Nom"),Z.qZA(),Z.TgZ(35,"th"),Z._uU(36,"Description"),Z.qZA(),Z.TgZ(37,"th"),Z._uU(38,"Prix"),Z.qZA(),Z.TgZ(39,"th"),Z._uU(40,"Stock"),Z.qZA(),Z.TgZ(41,"th"),Z._uU(42,"Disponibilit\xe9"),Z.qZA(),Z.TgZ(43,"th"),Z._uU(44,"Cat\xe9gorie"),Z.qZA(),Z.TgZ(45,"th"),Z._uU(46,"Cr\xe9\xe9 le"),Z.qZA(),Z.TgZ(47,"th"),Z._uU(48,"Mis \xe0 jour le"),Z.qZA(),Z.TgZ(49,"th"),Z._uU(50,"Actions"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(51,"tbody"),Z.YNc(52,A,25,9,"tr",18),Z.YNc(53,f,3,0,"tr",19),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(54,"div",20),Z.TgZ(55,"div",21),Z.TgZ(56,"div",22),Z.TgZ(57,"div",23),Z.TgZ(58,"h5",24),Z._uU(59," Mettre \xe0 jour le produit"),Z.qZA(),Z.TgZ(60,"button",25),Z.TgZ(61,"span",26),Z._uU(62,"\xd7"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(63,"div",27),Z.TgZ(64,"form",28,29),Z.NdJ("ngSubmit",function(){Z.CHM(e);const r=Z.MAs(65);return t.updateProduct(r)}),Z.TgZ(66,"div",30),Z.TgZ(67,"label",31),Z._uU(68,"Nom"),Z.qZA(),Z.TgZ(69,"input",32,33),Z.NdJ("ngModelChange",function(e){return t.selectedProduct.name=e}),Z.qZA(),Z.qZA(),Z.TgZ(71,"div",30),Z.TgZ(72,"label",34),Z._uU(73,"Description"),Z.qZA(),Z.TgZ(74,"input",35),Z.NdJ("ngModelChange",function(e){return t.selectedProduct.description=e}),Z.qZA(),Z.qZA(),Z.TgZ(75,"div",30),Z.TgZ(76,"label",36),Z._uU(77,"Prix"),Z.qZA(),Z.TgZ(78,"input",37),Z.NdJ("ngModelChange",function(e){return t.selectedProduct.price=e}),Z.qZA(),Z.qZA(),Z.TgZ(79,"div",30),Z.TgZ(80,"label",38),Z._uU(81,"Stock"),Z.qZA(),Z.TgZ(82,"input",39),Z.NdJ("ngModelChange",function(e){return t.selectedProduct.stock=e}),Z.qZA(),Z.qZA(),Z.TgZ(83,"div",30),Z.TgZ(84,"label",40),Z._uU(85,"Cat\xe9gorie"),Z.qZA(),Z.TgZ(86,"input",41),Z.NdJ("ngModelChange",function(e){return t.selectedProduct.category.name=e}),Z.qZA(),Z.qZA(),Z.YNc(87,b,2,1,"div",42),Z.TgZ(88,"button",43),Z._uU(89,"Mettre \xe0 jour le produit"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(90,"div",44),Z.TgZ(91,"button",45),Z._uU(92,"Fermer"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(93,q,9,0,"div",46)}if(2&e){const e=Z.MAs(65);Z.xp6(9),Z.Q6J("ngModel",t.searchTerm),Z.xp6(9),Z.Q6J("ngModel",t.categorySearchTerm),Z.xp6(34),Z.Q6J("ngForOf",t.produits),Z.xp6(1),Z.Q6J("ngIf",0===t.produits.length),Z.xp6(16),Z.Q6J("ngModel",t.selectedProduct.name),Z.xp6(5),Z.Q6J("ngModel",t.selectedProduct.description),Z.xp6(4),Z.Q6J("ngModel",t.selectedProduct.price),Z.xp6(4),Z.Q6J("ngModel",t.selectedProduct.stock),Z.xp6(4),Z.Q6J("ngModel",t.selectedProduct.category.name),Z.xp6(1),Z.Q6J("ngIf",t.messageSuccess),Z.xp6(1),Z.Q6J("disabled",e.invalid),Z.xp6(5),Z.Q6J("ngIf",t.showConfirmModal)}},directives:[T.Fj,T.JJ,T.On,i.rH,o.sg,o.O5,T._Y,T.JL,T.F,T.Q7,T.wO,T.nD,T.wV],styles:[".confirmation-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.confirmation-box[_ngcontent-%COMP%]{background-color:#fff;padding:20px 30px;border-radius:8px;text-align:center;width:300px;box-shadow:0 5px 15px #0000004d}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[i.Bz.forChild(y)],i.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({imports:[[o.ez,x,T.u5]]}),e})()}}]);