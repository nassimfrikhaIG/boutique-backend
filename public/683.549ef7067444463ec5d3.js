(self.webpackChunktest=self.webpackChunktest||[]).push([[683],{1683:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ReviewsModule:()=>u});var i=n(1116),r=n(9076),s=n(8619),o=n(2693);const c=function(t,e){return{"bg-success":t,"bg-warning":e}};function a(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr"),s.TgZ(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.TgZ(9,"td"),s.TgZ(10,"span",4),s._uU(11),s.qZA(),s.qZA(),s.TgZ(12,"td"),s.TgZ(13,"button",5),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().validateReview(e._id)}),s._uU(14," Valider "),s.qZA(),s.TgZ(15,"button",6),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().deleteReview(e._id)}),s._uU(16," Supprimer "),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.Oqu(t.user.username),s.xp6(2),s.Oqu(t.product.name),s.xp6(2),s.Oqu(t.rating),s.xp6(2),s.Oqu(t.comment),s.xp6(2),s.Q6J("ngClass",s.WLB(7,c,t.isValidated,!t.isValidated)),s.xp6(1),s.hij(" ",t.isValidated?"Valid\xe9":"En attente"," "),s.xp6(2),s.Q6J("disabled",t.isValidated)}}const l=[{path:"",component:(()=>{class t{constructor(t){this.http=t,this.reviews=[],this.apiUrl="http://localhost:3000"}ngOnInit(){this.loadReviews()}loadReviews(){this.http.get(`${this.apiUrl}/all`).subscribe(t=>this.reviews=t,t=>console.error("Erreur lors du chargement des avis",t))}validateReview(t){this.http.patch(`${this.apiUrl}/validate/${t}`,{}).subscribe(()=>this.loadReviews(),t=>console.error("Erreur lors de la validation",t))}deleteReview(t){confirm("Voulez-vous vraiment supprimer cet avis ?")&&this.http.delete(`${this.apiUrl}/delete/${t}`).subscribe(()=>this.loadReviews(),t=>console.error("Erreur lors de la suppression",t))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.eN))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-reviews"]],decls:20,vars:1,consts:[[1,"container","mt-4"],[1,"mb-3"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-success","btn-sm","me-2",3,"disabled","click"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h2",1),s._uU(2,"Gestion des Avis"),s.qZA(),s.TgZ(3,"table",2),s.TgZ(4,"thead"),s.TgZ(5,"tr"),s.TgZ(6,"th"),s._uU(7,"Utilisateur"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Produit"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Note"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Commentaire"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Statut"),s.qZA(),s.TgZ(16,"th"),s._uU(17,"Actions"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(18,"tbody"),s.YNc(19,a,17,10,"tr",3),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(19),s.Q6J("ngForOf",e.reviews))},directives:[i.sg,i.mk],styles:[".reviews-container[_ngcontent-%COMP%]{width:80%;margin:auto;font-family:Arial,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}button[_ngcontent-%COMP%]{padding:5px 10px;border:none;background-color:#dc3545;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#c82333}"]}),t})()}];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(l)],r.Bz]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[i.ez,d]]}),t})()}}]);