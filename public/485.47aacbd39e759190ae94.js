(self.webpackChunktest=self.webpackChunktest||[]).push([[485],{7485:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CommandesModule:()=>Z});var o=n(1116),r=n(9076),c=n(8619),s=n(5829);function i(t,e){if(1&t&&(c.TgZ(0,"li"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.lnq(" ",t.product.name," (x",t.quantity,") - ",t.price," DT ")}}function d(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr",7),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().selectCommande(e)}),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"ul"),c.YNc(5,i,2,3,"li",8),c.qZA(),c.qZA(),c.TgZ(6,"td"),c._uU(7),c.qZA(),c.TgZ(8,"td"),c._uU(9),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"date"),c.qZA(),c.TgZ(15,"td"),c.TgZ(16,"button",9),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().changeStatus(e,"en attente")}),c._uU(17,"en attente"),c.qZA(),c.TgZ(18,"button",9),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().changeStatus(e,"En traitement")}),c._uU(19,"En traitement"),c.qZA(),c.TgZ(20,"button",9),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().changeStatus(e,"Exp\xe9di\xe9e")}),c._uU(21,"Exp\xe9di\xe9e"),c.qZA(),c.TgZ(22,"button",9),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().changeStatus(e,"Livr\xe9e")}),c._uU(23,"Livr\xe9e"),c.qZA(),c.TgZ(24,"button",9),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().changeStatus(e,"annul\xe9")}),c._uU(25,"annul\xe9"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.Oqu(null==t.user?null:t.user.username),c.xp6(3),c.Q6J("ngForOf",t.items),c.xp6(2),c.hij("",t.totalAmount," DT"),c.xp6(2),c.Oqu(t.status),c.xp6(2),c.Oqu(t.shippingDetails.address),c.xp6(2),c.Oqu(c.xi3(14,6,t.createdAt,"dd/MM/yyyy"))}}function u(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"h3"),c._uU(2,"D\xe9tails de la Commande"),c.qZA(),c.TgZ(3,"p"),c.TgZ(4,"strong"),c._uU(5,"Utilisateur:"),c.qZA(),c._uU(6),c.qZA(),c.TgZ(7,"p"),c.TgZ(8,"strong"),c._uU(9,"Total:"),c.qZA(),c._uU(10),c.qZA(),c.TgZ(11,"p"),c.TgZ(12,"strong"),c._uU(13,"Statut:"),c.qZA(),c._uU(14),c.qZA(),c.TgZ(15,"p"),c.TgZ(16,"strong"),c._uU(17,"Date:"),c.qZA(),c._uU(18),c.ALo(19,"date"),c.qZA(),c.TgZ(20,"button",9),c.NdJ("click",function(){return c.CHM(t),c.oxw().selectedCommande=null}),c._uU(21,"Fermer"),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(6),c.hij(" ",null==t.selectedCommande.user?null:t.selectedCommande.user.username,""),c.xp6(4),c.hij(" ",t.selectedCommande.totalAmount," DT"),c.xp6(4),c.hij(" ",t.selectedCommande.status,""),c.xp6(4),c.hij(" ",c.xi3(19,4,t.selectedCommande.createdAt,"dd/MM/yyyy"),"")}}const a=[{path:"",component:(()=>{class t{constructor(t){this.ordersService=t,this.commandes=[],this.selectedCommande=null}ngOnInit(){this.loadOrders()}loadOrders(){this.ordersService.getOrders().subscribe(t=>{t.success?this.commandes=t.orders:console.error("Erreur lors du chargement des commandes")},t=>{console.error("Erreur API",t)})}changeStatus(t,e){this.ordersService.updateOrderStatus(t._id,e).subscribe(t=>{t.success?(this.loadOrders(),alert("Statut de la commande mis \xe0 jour")):console.error("Erreur lors de la mise \xe0 jour du statut")},t=>{console.error("Erreur API",t)})}selectCommande(t){this.selectedCommande=t}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.I))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-commandes"]],decls:25,vars:2,consts:[[1,"container-fluid"],[1,"h3","mb-4","text-gray-800"],[1,"card","shadow","mb-4"],[1,"card-body"],[1,"table","table-bordered"],[3,"click",4,"ngFor","ngForOf"],["class","order-details",4,"ngIf"],[3,"click"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"order-details"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1",1),c._uU(2,"Liste des Commandes"),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"table",4),c.TgZ(6,"thead"),c.TgZ(7,"tr"),c.TgZ(8,"th"),c._uU(9,"Utilisateur"),c.qZA(),c.TgZ(10,"th"),c._uU(11,"Produits"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Total"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Statut"),c.qZA(),c.TgZ(16,"th"),c._uU(17,"Adresse"),c.qZA(),c.TgZ(18,"th"),c._uU(19,"Date"),c.qZA(),c.TgZ(20,"th"),c._uU(21,"Actions"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"tbody"),c.YNc(23,d,26,9,"tr",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(24,u,22,7,"div",6)),2&t&&(c.xp6(23),c.Q6J("ngForOf",e.commandes),c.xp6(1),c.Q6J("ngIf",e.selectedCommande))},directives:[o.sg,o.O5],pipes:[o.uU],styles:[".orders-container[_ngcontent-%COMP%]{width:80%;margin:auto;font-family:Arial,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}button[_ngcontent-%COMP%]{margin:5px;padding:5px 10px;border:none;background-color:#007bff;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.order-details[_ngcontent-%COMP%]{margin-top:20px;padding:10px;border:1px solid #ddd;background-color:#f9f9f9}"]}),t})()}];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(a)],r.Bz]}),t})();var g=n(1462);let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,l,g.u5]]}),t})()}}]);