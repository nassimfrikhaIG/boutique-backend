(self.webpackChunktest=self.webpackChunktest||[]).push([[592],{5829:(t,e,r)=>{"use strict";r.d(e,{I:()=>o});var s=r(2693),i=r(9996),h=r(529),a=r(5614),n=r(2225);let o=(()=>{class t{constructor(t,e){this.http=t,this.authService=e,this.apiUrl=h.N.apiUrl,this.apiAdmin=`${h.N.apiUrl}/admin/orders`}getAuthHeaders(){const t=localStorage.getItem("token")||"";return(new s.WM).set("Authorization",`Bearer ${t}`)}getCart(){const t=this.authService.getUserId();return this.http.get(`${this.apiUrl}/cart/${t}`,{headers:this.getAuthHeaders()})}checkout(t,e){return this.http.post(`${this.apiUrl}/checkout`,{shippingDetails:t,paymentMethod:e},{headers:this.getAuthHeaders()})}getUserOrders(){return this.http.get(`${this.apiUrl}/orders`,{headers:this.getAuthHeaders()})}getOrderDetails(t){return this.http.get(`${this.apiUrl}/orders/${t}`,{headers:this.getAuthHeaders()})}cancelOrder(t){return this.http.post(`${this.apiUrl}/orders/${t}/cancel`,{},{headers:this.getAuthHeaders()})}getOrders(){return this.http.get(this.apiAdmin,{headers:this.getAuthHeaders()})}updateOrderStatus(t,e){return this.http.patch(`${this.apiAdmin}/${t}/status`,{status:e},{headers:this.getAuthHeaders()})}getAllOrders(){return this.http.get(this.apiAdmin,{headers:this.getAuthHeaders()})}getOrdersCountByStatus(){return this.getAllOrders().pipe((0,i.U)(t=>{const e={pending:0,processing:0,shipped:0,delivered:0,cancelled:0};return(t.orders||[]).forEach(t=>{e.hasOwnProperty(t.status)&&e[t.status]++}),e}))}getTotalRevenue(){return this.getAllOrders().pipe((0,i.U)(t=>(t.orders||[]).reduce((t,e)=>t+(e.totalAmount||0),0)))}getMonthlyRevenue(){return this.getAllOrders().pipe((0,i.U)(t=>{const e=t.orders||[],r={},s=["January","February","March","April","May","June","July","August","September","October","November","December"];return s.forEach(t=>r[t]=0),e.forEach(t=>{const e=new Date(t.createdAt),i=s[e.getMonth()];r[i]+=t.totalAmount||0}),s.map(t=>({month:t,revenue:r[t]}))}))}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(s.eN),a.LFG(n.A))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2797:(t,e,r)=>{"use strict";r.d(e,{s:()=>p});var s=r(1225),i=r(6673);class h{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new a(t,this.count,this.source))}}class a extends i.L{constructor(t,e,r){super(t),this.count=e,this.source=r}error(t){if(!this.isStopped){const{source:e,count:r}=this;if(0===r)return super.error(t);r>-1&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}}}var n=r(7727),o=r(529),u=r(5614),d=r(2693);let p=(()=>{class t{constructor(t){this.http=t,this.apiUrl=`${o.N.apiUrl}/offre`}addOffre(t,e,r){return this.http.post(`${this.apiUrl}`,{productId:t,discount:e,expiresAt:r})}getOffres(){return this.http.get(`${this.apiUrl}`).pipe(function(t=-1){return e=>e.lift(new h(t,e))}(3),(0,n.K)(this.handleError))}handleError(t){return console.error("Une erreur s'est produite:",t),(0,s._)(()=>t)}updateoffre(t,e){return this.http.patch(`${this.apiUrl}/${t}`,e)}deleteOffre(t){return this.http.delete(`${this.apiUrl}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(d.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},7512:(t,e,r)=>{"use strict";r.d(e,{b:()=>a});var s=r(2693),i=r(529),h=r(5614);let a=(()=>{class t{constructor(t){this.http=t,this.token=localStorage.getItem("token"),this.headerall=(new s.WM).set("authorization",this.token),this.apiUr=`${i.N.apiUrl}/contact`,this.apiUrl=`${i.N.apiUrl}`}sendContact(t){return this.http.post(this.apiUr,t,{headers:this.headerall})}getReviewsByProduct(t){return this.http.get(`${this.apiUrl}/product/${t}`)}addReview(t){return this.http.post(`${this.apiUrl}/add`,t,{headers:this.headerall})}getAllReviews(){return this.http.get(`${this.apiUrl}/all`)}validateReview(t){return this.http.patch(`${this.apiUrl}/validate/${t}`,{})}deleteReview(t){return this.http.delete(`${this.apiUrl}/delete/${t}`,{})}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(s.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6167:(t,e,r)=>{"use strict";r.d(e,{m:()=>n});var s=r(2693),i=r(529),h=r(5614),a=r(2225);let n=(()=>{class t{constructor(t,e){this.http=t,this.authService=e,this.token=localStorage.getItem("token"),this.headerall=(new s.WM).set("authorization",this.token),this.apiUrl=`${i.N.apiUrl}`}getUserWishlist(){const t=this.authService.getUserId();if(!t)throw new Error("Utilisateur non authentifi\xe9");return this.http.get(`${this.apiUrl}/wishlist/user?userId=${t}`,{headers:this.headerall})}removeFromWishlist(t){const e=this.authService.getUserId();if(!e)throw new Error("Utilisateur non authentifi\xe9");return this.http.request("delete",`${this.apiUrl}/wishlist/remove`,{body:{userId:e,productId:t},headers:this.headerall})}addToWishlist(t){const e=this.authService.getUserId();if(!e)throw new Error("Utilisateur non authentifi\xe9");return this.http.post(`${this.apiUrl}/wishlist/add`,{userId:e,productId:t},{headers:this.headerall})}getMostWishedProducts(){return this.http.get(`${this.apiUrl}/wishlist/most-wished`)}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(s.eN),h.LFG(a.A))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);