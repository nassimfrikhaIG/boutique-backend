(self.webpackChunktest=self.webpackChunktest||[]).push([[496],{4496:(e,r,o)=>{"use strict";o.r(r),o.d(r,{ProfileModule:()=>E});var t=o(1116),s=o(9076),i=o(1462),l=o(8619),n=o(8415);function a(e,r){if(1&e&&(l.TgZ(0,"div",63),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ",e.successMessage," ")}}function u(e,r){if(1&e&&(l.TgZ(0,"div",64),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ",e.errorMessage," ")}}function d(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le nom d'utilisateur est requis"),l.qZA())}function p(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le nom d'utilisateur doit contenir au moins 3 caract\xe8res"),l.qZA())}function g(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,d,2,0,"small",66),l.YNc(2,p,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r,o;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("username"))?null:r.hasError("required")),l.xp6(1),l.Q6J("ngIf",null==(o=e.profileForm.get("username"))?null:o.hasError("minlength"))}}function c(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"L'email est requis"),l.qZA())}function m(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Veuillez entrer un email valide"),l.qZA())}function f(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,c,2,0,"small",66),l.YNc(2,m,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r,o;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("email"))?null:r.hasError("required")),l.xp6(1),l.Q6J("ngIf",null==(o=e.profileForm.get("email"))?null:o.hasError("email"))}}function Z(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le pr\xe9nom est requis"),l.qZA())}function h(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,Z,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("firstName"))?null:r.hasError("required"))}}function q(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le nom est requis"),l.qZA())}function v(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,q,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("lastName"))?null:r.hasError("required"))}}function x(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le num\xe9ro de t\xe9l\xe9phone est requis"),l.qZA())}function T(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,x,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("phone"))?null:r.hasError("required"))}}function A(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"L'adresse est requise"),l.qZA())}function b(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,A,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("address"))?null:r.hasError("required"))}}function _(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le pays est requis"),l.qZA())}function w(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,_,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("country"))?null:r.hasError("required"))}}function y(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"La ville est requise"),l.qZA())}function N(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,y,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("city"))?null:r.hasError("required"))}}function U(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le code postal est requis"),l.qZA())}function I(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,U,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("postalCode"))?null:r.hasError("required"))}}function F(e,r){1&e&&(l.TgZ(0,"small"),l._uU(1,"Le mot de passe doit contenir au moins 6 caract\xe8res"),l.qZA())}function C(e,r){if(1&e&&(l.TgZ(0,"div",65),l.YNc(1,F,2,0,"small",66),l.qZA()),2&e){const e=l.oxw();let r;l.xp6(1),l.Q6J("ngIf",null==(r=e.profileForm.get("password"))?null:r.hasError("minlength"))}}function J(e,r){1&e&&(l.TgZ(0,"div",65),l.TgZ(1,"small"),l._uU(2,"Les mots de passe ne correspondent pas"),l.qZA(),l.qZA())}function k(e,r){if(1&e&&(l.TgZ(0,"div",67),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.successMessage)}}function P(e,r){if(1&e&&(l.TgZ(0,"div",68),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(2),l.Oqu(e.errorMessage)}}const Q=function(e,r){return{"fa-eye":e,"fa-eye-slash":r}},Y=[{path:"",component:(()=>{class e{constructor(e,r,o){this.fb=e,this.userService=r,this.router=o,this.userId="",this.isSubmitting=!1,this.errorMessage="",this.successMessage="",this.showPassword=!1,this.showConfirmPassword=!1,this.profileForm=this.fb.group({username:["",[i.kI.required,i.kI.minLength(3)]],email:["",[i.kI.required,i.kI.email]],firstName:["",i.kI.required],lastName:["",i.kI.required],phone:["",i.kI.required],address:["",i.kI.required],country:["",i.kI.required],city:["",i.kI.required],region:[""],postalCode:["",i.kI.required],password:["",[i.kI.minLength(6)]],confirmPassword:[""]},{validator:this.checkPasswords})}ngOnInit(){this.loadUserData()}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}checkPasswords(e){var r,o;const t=null===(r=e.get("password"))||void 0===r?void 0:r.value,s=null===(o=e.get("confirmPassword"))||void 0===o?void 0:o.value;return t||s?t===s?null:{notMatching:!0}:null}loadUserData(){this.userId=this.userService.getUserIdFromToken(),this.userId?this.userService.getUserById(this.userId).subscribe(e=>{this.profileForm.patchValue({username:e.username,email:e.email,firstName:e.firstName,lastName:e.lastName,phone:e.phone,address:e.address,country:e.country,city:e.city,region:e.region,postalCode:e.postalCode})},e=>{this.errorMessage="Failed to load user data",console.error(e)}):(this.errorMessage="User not authenticated",setTimeout(()=>{this.router.navigate(["/login"])},2e3))}onSubmit(){this.profileForm.invalid||(this.isSubmitting=!0,this.userService.updateUser(this.userId,{username:this.profileForm.value.username,email:this.profileForm.value.email,firstName:this.profileForm.value.firstName,lastName:this.profileForm.value.lastName,phone:this.profileForm.value.phone,address:this.profileForm.value.address,country:this.profileForm.value.country,city:this.profileForm.value.city,region:this.profileForm.value.region,postalCode:this.profileForm.value.postalCode},this.profileForm.value.password).subscribe(e=>{this.isSubmitting=!1,this.successMessage="Profil mis \xe0 jour avec succ\xe8s",this.profileForm.patchValue({password:"",confirmPassword:""}),setTimeout(()=>{this.successMessage=""},5e3)},e=>{var r;this.isSubmitting=!1,this.errorMessage=(null===(r=e.error)||void 0===r?void 0:r.message)||"\xc9chec de la mise \xe0 jour du profil",console.error(e),setTimeout(()=>{this.errorMessage=""},5e3)}))}}return e.\u0275fac=function(r){return new(r||e)(l.Y36(i.qu),l.Y36(n.K),l.Y36(s.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-profile"]],decls:130,vars:29,consts:[[1,"app-content"],[1,"u-s-p-y-60"],[1,"section__content"],[1,"container"],[1,"breadcrumb"],[1,"breadcrumb__wrap"],[1,"breadcrumb__list"],[1,"has-separator"],["routerLink","/accueil"],["routerLink","/profile"],[1,"u-s-p-b-60"],[1,"dash"],[1,"row"],[1,"col-lg-3","col-md-12"],[1,"dash__box","dash__box--bg-white","dash__box--shadow","u-s-m-b-30"],[1,"dash__pad-1"],[1,"dash__text","u-s-m-b-16"],[1,"dash__f-list"],["routerLink","/dashboard"],["routerLink","/profile-edit",1,"dash-active"],[1,"col-lg-9","col-md-12"],[1,"dash__box","dash__box--shadow","dash__box--radius","dash__box--bg-white"],[1,"dash__pad-2"],[1,"dash__h1","u-s-m-b-14"],[1,"dash__text","u-s-m-b-30"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"dash-edit-profile",3,"formGroup","ngSubmit"],[1,"section-title"],[1,"u-s-m-b-15"],[1,"gl-inline"],[1,"u-s-m-b-30"],["for","username",1,"gl-label"],["type","text","id","username","formControlName","username","placeholder","Entrez votre nom d'utilisateur",1,"input-text","input-text--primary-style"],["class","text-danger",4,"ngIf"],["for","email",1,"gl-label"],["type","email","id","email","formControlName","email","placeholder","Entrez votre email",1,"input-text","input-text--primary-style"],["for","firstName",1,"gl-label"],["type","text","id","firstName","formControlName","firstName","placeholder","Entrez votre pr\xe9nom",1,"input-text","input-text--primary-style"],["for","lastName",1,"gl-label"],["type","text","id","lastName","formControlName","lastName","placeholder","Entrez votre nom",1,"input-text","input-text--primary-style"],["for","phone",1,"gl-label"],["type","tel","id","phone","formControlName","phone","placeholder","Entrez votre num\xe9ro de t\xe9l\xe9phone",1,"input-text","input-text--primary-style"],["for","address",1,"gl-label"],["type","text","id","address","formControlName","address","placeholder","Entrez votre adresse",1,"input-text","input-text--primary-style"],["for","country",1,"gl-label"],["type","text","id","country","formControlName","country","placeholder","Entrez votre pays",1,"input-text","input-text--primary-style"],["for","city",1,"gl-label"],["type","text","id","city","formControlName","city","placeholder","Entrez votre ville",1,"input-text","input-text--primary-style"],["for","region",1,"gl-label"],["type","text","id","region","formControlName","region","placeholder","Entrez votre r\xe9gion ou \xe9tat",1,"input-text","input-text--primary-style"],["for","postalCode",1,"gl-label"],["type","text","id","postalCode","formControlName","postalCode","placeholder","Entrez votre code postal",1,"input-text","input-text--primary-style"],["for","password",1,"gl-label"],[1,"password-input-container"],["id","password","formControlName","password","placeholder","Entrez votre nouveau mot de passe",1,"input-text","input-text--primary-style",3,"type"],[1,"password-toggle",3,"click"],[1,"fas",3,"ngClass"],["for","confirmPassword",1,"gl-label"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirmez votre nouveau mot de passe",1,"input-text","input-text--primary-style",3,"type"],["class","success-message u-s-m-b-30",4,"ngIf"],["class","error-message u-s-m-b-30",4,"ngIf"],["type","submit",1,"btn","btn--e-brand-b-2",3,"disabled"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"text-danger"],[4,"ngIf"],[1,"success-message","u-s-m-b-30"],[1,"error-message","u-s-m-b-30"]],template:function(e,r){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.TgZ(6,"ul",6),l.TgZ(7,"li",7),l.TgZ(8,"a",8),l._uU(9,"Accueil"),l.qZA(),l.qZA(),l.TgZ(10,"li",7),l.TgZ(11,"a",9),l._uU(12,"Mon compte"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",10),l.TgZ(14,"div",2),l.TgZ(15,"div",11),l.TgZ(16,"div",3),l.TgZ(17,"div",12),l.TgZ(18,"div",13),l.TgZ(19,"div",14),l.TgZ(20,"div",15),l.TgZ(21,"span",16),l._uU(22),l.qZA(),l.TgZ(23,"ul",17),l.TgZ(24,"li"),l.TgZ(25,"a",18),l._uU(26,"G\xe9rer mon compte"),l.qZA(),l.qZA(),l.TgZ(27,"li"),l.TgZ(28,"a",19),l._uU(29,"Mon profil"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",20),l.TgZ(31,"div",21),l.TgZ(32,"div",22),l.TgZ(33,"h1",23),l._uU(34,"Modifier le profil"),l.qZA(),l.TgZ(35,"span",24),l._uU(36,"Mettez \xe0 jour vos informations personnelles ici."),l.qZA(),l.YNc(37,a,2,1,"div",25),l.YNc(38,u,2,1,"div",26),l.TgZ(39,"form",27),l.NdJ("ngSubmit",function(){return r.onSubmit()}),l.TgZ(40,"div",28),l.TgZ(41,"h3",29),l._uU(42,"Informations de base"),l.qZA(),l.qZA(),l.TgZ(43,"div",30),l.TgZ(44,"div",31),l.TgZ(45,"label",32),l._uU(46,"Nom d'utilisateur *"),l.qZA(),l._UZ(47,"input",33),l.YNc(48,g,3,2,"div",34),l.qZA(),l.qZA(),l.TgZ(49,"div",30),l.TgZ(50,"div",31),l.TgZ(51,"label",35),l._uU(52,"Email *"),l.qZA(),l._UZ(53,"input",36),l.YNc(54,f,3,2,"div",34),l.qZA(),l.qZA(),l.TgZ(55,"div",28),l.TgZ(56,"h3",29),l._uU(57,"Informations personnelles"),l.qZA(),l.qZA(),l.TgZ(58,"div",30),l.TgZ(59,"div",31),l.TgZ(60,"label",37),l._uU(61,"Pr\xe9nom *"),l.qZA(),l._UZ(62,"input",38),l.YNc(63,h,2,1,"div",34),l.qZA(),l.TgZ(64,"div",31),l.TgZ(65,"label",39),l._uU(66,"Nom *"),l.qZA(),l._UZ(67,"input",40),l.YNc(68,v,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(69,"div",30),l.TgZ(70,"div",31),l.TgZ(71,"label",41),l._uU(72,"T\xe9l\xe9phone *"),l.qZA(),l._UZ(73,"input",42),l.YNc(74,T,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(75,"div",28),l.TgZ(76,"h3",29),l._uU(77,"Adresse"),l.qZA(),l.qZA(),l.TgZ(78,"div",30),l.TgZ(79,"div",31),l.TgZ(80,"label",43),l._uU(81,"Adresse *"),l.qZA(),l._UZ(82,"input",44),l.YNc(83,b,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(84,"div",30),l.TgZ(85,"div",31),l.TgZ(86,"label",45),l._uU(87,"Pays *"),l.qZA(),l._UZ(88,"input",46),l.YNc(89,w,2,1,"div",34),l.qZA(),l.TgZ(90,"div",31),l.TgZ(91,"label",47),l._uU(92,"Ville *"),l.qZA(),l._UZ(93,"input",48),l.YNc(94,N,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(95,"div",30),l.TgZ(96,"div",31),l.TgZ(97,"label",49),l._uU(98,"R\xe9gion/\xc9tat"),l.qZA(),l._UZ(99,"input",50),l.qZA(),l.TgZ(100,"div",31),l.TgZ(101,"label",51),l._uU(102,"Code postal *"),l.qZA(),l._UZ(103,"input",52),l.YNc(104,I,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(105,"div",28),l.TgZ(106,"h3",29),l._uU(107,"S\xe9curit\xe9"),l.qZA(),l.qZA(),l.TgZ(108,"div",30),l.TgZ(109,"div",31),l.TgZ(110,"label",53),l._uU(111,"Mot de passe (Laissez vide pour conserver l'actuel)"),l.qZA(),l.TgZ(112,"div",54),l._UZ(113,"input",55),l.TgZ(114,"span",56),l.NdJ("click",function(){return r.togglePasswordVisibility()}),l._UZ(115,"i",57),l.qZA(),l.qZA(),l.YNc(116,C,2,1,"div",34),l.qZA(),l.qZA(),l.TgZ(117,"div",30),l.TgZ(118,"div",31),l.TgZ(119,"label",58),l._uU(120,"Confirmer le mot de passe"),l.qZA(),l.TgZ(121,"div",54),l._UZ(122,"input",59),l.TgZ(123,"span",56),l.NdJ("click",function(){return r.toggleConfirmPasswordVisibility()}),l._UZ(124,"i",57),l.qZA(),l.qZA(),l.YNc(125,J,3,0,"div",34),l.qZA(),l.qZA(),l.YNc(126,k,3,1,"div",60),l.YNc(127,P,3,1,"div",61),l.TgZ(128,"button",62),l._uU(129),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){let e,o,t,s,i,n,a,u,d,p,g,c;l.xp6(22),l.hij("Bonjour, ",null==(e=r.profileForm.get("username"))?null:e.value,""),l.xp6(15),l.Q6J("ngIf",r.successMessage),l.xp6(1),l.Q6J("ngIf",r.errorMessage),l.xp6(1),l.Q6J("formGroup",r.profileForm),l.xp6(9),l.Q6J("ngIf",(null==(o=r.profileForm.get("username"))?null:o.errors)&&(null==(o=r.profileForm.get("username"))?null:o.touched)),l.xp6(6),l.Q6J("ngIf",(null==(t=r.profileForm.get("email"))?null:t.errors)&&(null==(t=r.profileForm.get("email"))?null:t.touched)),l.xp6(9),l.Q6J("ngIf",(null==(s=r.profileForm.get("firstName"))?null:s.errors)&&(null==(s=r.profileForm.get("firstName"))?null:s.touched)),l.xp6(5),l.Q6J("ngIf",(null==(i=r.profileForm.get("lastName"))?null:i.errors)&&(null==(i=r.profileForm.get("lastName"))?null:i.touched)),l.xp6(6),l.Q6J("ngIf",(null==(n=r.profileForm.get("phone"))?null:n.errors)&&(null==(n=r.profileForm.get("phone"))?null:n.touched)),l.xp6(9),l.Q6J("ngIf",(null==(a=r.profileForm.get("address"))?null:a.errors)&&(null==(a=r.profileForm.get("address"))?null:a.touched)),l.xp6(6),l.Q6J("ngIf",(null==(u=r.profileForm.get("country"))?null:u.errors)&&(null==(u=r.profileForm.get("country"))?null:u.touched)),l.xp6(5),l.Q6J("ngIf",(null==(d=r.profileForm.get("city"))?null:d.errors)&&(null==(d=r.profileForm.get("city"))?null:d.touched)),l.xp6(10),l.Q6J("ngIf",(null==(p=r.profileForm.get("postalCode"))?null:p.errors)&&(null==(p=r.profileForm.get("postalCode"))?null:p.touched)),l.xp6(9),l.Q6J("type",r.showPassword?"text":"password"),l.xp6(2),l.Q6J("ngClass",l.WLB(23,Q,r.showPassword,!r.showPassword)),l.xp6(1),l.Q6J("ngIf",(null==(g=r.profileForm.get("password"))?null:g.errors)&&(null==(g=r.profileForm.get("password"))?null:g.touched)),l.xp6(6),l.Q6J("type",r.showConfirmPassword?"text":"password"),l.xp6(2),l.Q6J("ngClass",l.WLB(26,Q,r.showConfirmPassword,!r.showConfirmPassword)),l.xp6(1),l.Q6J("ngIf",r.profileForm.errors&&r.profileForm.errors.notMatching&&(null==(c=r.profileForm.get("confirmPassword"))?null:c.touched)),l.xp6(1),l.Q6J("ngIf",r.successMessage),l.xp6(1),l.Q6J("ngIf",r.errorMessage),l.xp6(1),l.Q6J("disabled",r.profileForm.invalid||r.isSubmitting),l.xp6(1),l.hij(" ",r.isSubmitting?"Mise \xe0 jour en cours...":"ENREGISTRER LES MODIFICATIONS"," ")}},directives:[s.yS,t.O5,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,t.mk],styles:[".dash-edit-profile[_ngcontent-%COMP%]{max-width:800px;.gl-inline,.u-s-m-b-30{width:100%}.input-text{width:100%;height:40px;padding:0 18px;border:1px solid #eee;border-radius:2px;background-color:#f5f5f5;&:focus{border-color:#333;background-color:#fff}}.gl-label{margin-bottom:8px;display:block;font-size:14px;color:#333}.text-danger{color:#dc3545;margin-top:5px;font-size:12px}.alert{padding:12px 20px;margin-bottom:20px;border-radius:4px;&.alert-success{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}&.alert-danger{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}}.btn{margin-top:15px;padding:12px 25px;border:none;border-radius:4px;cursor:pointer;font-weight:600;&:disabled{opacity:.7;cursor:not-allowed}}.btn--e-brand-b-2{background-color:#333;color:#fff;&:hover:not(:disabled){background-color:#000}}}.password-input-container[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#777}.password-toggle[_ngcontent-%COMP%]:hover{color:#333}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[t.ez,M,i.UX,s.Bz]]}),e})()}}]);