"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5039],{85023:function(e,t,r){r.d(t,{K:function(){return i}});var s=r(72982),a=r(65654);class i extends s.b${constructor(e,t){var r;super(t),this._clientInfo=e,this._capabilities=null!==(r=null==t?void 0:t.capabilities)&&void 0!==r?r:{}}registerCapabilities(e){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=(0,s.kK)(this._capabilities,e)}assertCapability(e,t){var r;if(!(null===(r=this._serverCapabilities)||void 0===r?void 0:r[e]))throw Error(`Server does not support ${e} (required for ${t})`)}async connect(e){await super.connect(e);try{let e=await this.request({method:"initialize",params:{protocolVersion:a.P7,capabilities:this._capabilities,clientInfo:this._clientInfo}},a.EE);if(void 0===e)throw Error(`Server sent invalid initialize result: ${e}`);if(!a.e5.includes(e.protocolVersion))throw Error(`Server's protocol version is not supported: ${e.protocolVersion}`);this._serverCapabilities=e.capabilities,this._serverVersion=e.serverInfo,this._instructions=e.instructions,await this.notification({method:"notifications/initialized"})}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var t,r,s,a,i;switch(e){case"logging/setLevel":if(!(null===(t=this._serverCapabilities)||void 0===t?void 0:t.logging))throw Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(null===(r=this._serverCapabilities)||void 0===r?void 0:r.prompts))throw Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(null===(s=this._serverCapabilities)||void 0===s?void 0:s.resources))throw Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(null===(a=this._serverCapabilities)||void 0===a?void 0:a.tools))throw Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(null===(i=this._serverCapabilities)||void 0===i?void 0:i.prompts))throw Error(`Server does not support prompts (required for ${e})`)}}assertNotificationCapability(e){var t;if("notifications/roots/list_changed"===e&&!(null===(t=this._capabilities.roots)||void 0===t?void 0:t.listChanged))throw Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw Error(`Client does not support roots capability (required for ${e})`)}}async ping(e){return this.request({method:"ping"},a.Zs,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},a.Bi,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},a.Zs,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},a.Go,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},a.ev,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},a.Ol,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},a.CD,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},a.vg,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},a.Zs,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},a.Zs,t)}async callTool(e,t=a.GR,r){return this.request({method:"tools/call",params:e},t,r)}async listTools(e,t){return this.request({method:"tools/list",params:e},a.Gd,t)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}},19980:function(e,t,r){r.d(t,{e:function(){return s}});class s{constructor(){this._messageQueue=[]}static createLinkedPair(){let e=new s,t=new s;return e._otherTransport=t,t._otherTransport=e,[e,t]}async start(){for(var e;this._messageQueue.length>0;){let t=this._messageQueue.shift();t&&(null===(e=this.onmessage)||void 0===e||e.call(this,t))}}async close(){var e;let t=this._otherTransport;this._otherTransport=void 0,await (null==t?void 0:t.close()),null===(e=this.onclose)||void 0===e||e.call(this)}async send(e){if(!this._otherTransport)throw Error("Not connected");this._otherTransport.onmessage?this._otherTransport.onmessage(e):this._otherTransport._messageQueue.push(e)}}},48973:function(e,t,r){let s;r.d(t,{q:function(){return O}});var a,i=r(72982),n=r(65654);class o extends i.b${constructor(e,t){var r;super(t),this._serverInfo=e,this._capabilities=null!==(r=null==t?void 0:t.capabilities)&&void 0!==r?r:{},this._instructions=null==t?void 0:t.instructions,this.setRequestHandler(n._z,e=>this._oninitialize(e)),this.setNotificationHandler(n.aZ,()=>{var e;return null===(e=this.oninitialized)||void 0===e?void 0:e.call(this)})}registerCapabilities(e){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=(0,i.kK)(this._capabilities,e)}assertCapabilityForMethod(e){var t,r;switch(e){case"sampling/createMessage":if(!(null===(t=this._clientCapabilities)||void 0===t?void 0:t.sampling))throw Error(`Client does not support sampling (required for ${e})`);break;case"roots/list":if(!(null===(r=this._clientCapabilities)||void 0===r?void 0:r.roots))throw Error(`Client does not support listing roots (required for ${e})`)}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${e})`)}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${e})`)}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:n.e5.includes(t)?t:n.P7,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},n.Zs)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},n.dn,t)}async listRoots(e,t){return this.request({method:"roots/list",params:e},n.lD,t)}async sendLoggingMessage(e){return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}let l=Symbol("Let zodToJsonSchema decide on which parser to use"),u={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},c=e=>"string"==typeof e?{...u,name:e}:{...u,...e},p=e=>{let t=c(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};var d=r(41270);function m(e,t,r,s){s?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function h(e,t,r,s,a){e[t]=r,m(e,t,s,a)}function g(e,t){return $(e.type._def,t)}let f=(e,t)=>$(e.innerType._def,t),v=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let s of e.checks)switch(s.kind){case"min":h(r,"minimum",s.value,s.message,t);break;case"max":h(r,"maximum",s.value,s.message,t)}return r},b=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e,y={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===s&&(s=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),s),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function z(e,t){let r={type:"string"};if(e.checks)for(let s of e.checks)switch(s.kind){case"min":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,s.value):s.value,s.message,t);break;case"max":h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,s.value):s.value,s.message,t);break;case"email":switch(t.emailStrategy){case"format:email":w(r,"email",s.message,t);break;case"format:idn-email":w(r,"idn-email",s.message,t);break;case"pattern:zod":P(r,y.email,s.message,t)}break;case"url":w(r,"uri",s.message,t);break;case"uuid":w(r,"uuid",s.message,t);break;case"regex":P(r,s.regex,s.message,t);break;case"cuid":P(r,y.cuid,s.message,t);break;case"cuid2":P(r,y.cuid2,s.message,t);break;case"startsWith":P(r,RegExp(`^${_(s.value,t)}`),s.message,t);break;case"endsWith":P(r,RegExp(`${_(s.value,t)}$`),s.message,t);break;case"datetime":w(r,"date-time",s.message,t);break;case"date":w(r,"date",s.message,t);break;case"time":w(r,"time",s.message,t);break;case"duration":w(r,"duration",s.message,t);break;case"length":h(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,s.value):s.value,s.message,t),h(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,s.value):s.value,s.message,t);break;case"includes":P(r,RegExp(_(s.value,t)),s.message,t);break;case"ip":"v6"!==s.version&&w(r,"ipv4",s.message,t),"v4"!==s.version&&w(r,"ipv6",s.message,t);break;case"base64url":P(r,y.base64url,s.message,t);break;case"jwt":P(r,y.jwt,s.message,t);break;case"cidr":"v6"!==s.version&&P(r,y.ipv4Cidr,s.message,t),"v4"!==s.version&&P(r,y.ipv6Cidr,s.message,t);break;case"emoji":P(r,y.emoji(),s.message,t);break;case"ulid":P(r,y.ulid,s.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":w(r,"binary",s.message,t);break;case"contentEncoding:base64":h(r,"contentEncoding","base64",s.message,t);break;case"pattern:zod":P(r,y.base64,s.message,t)}break;case"nanoid":P(r,y.nanoid,s.message,t)}return r}function _(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)x.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let x=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function w(e,t,r,s){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&s.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&s.errorMessages&&{errorMessage:{format:r}}})):h(e,"format",t,r,s)}function P(e,t,r,s){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&s.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:k(t,s),...r&&s.errorMessages&&{errorMessage:{pattern:r}}})):h(e,"pattern",k(t,s),r,s)}function k(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=r.i?e.source.toLowerCase():e.source,a="",i=!1,n=!1,o=!1;for(let e=0;e<s.length;e++){if(i){a+=s[e],i=!1;continue}if(r.i){if(n){if(s[e].match(/[a-z]/)){o?(a+=s[e]+`${s[e-2]}-${s[e]}`.toUpperCase(),o=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(a+=s[e],o=!0):a+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){a+=`[${s[e]}${s[e].toUpperCase()}]`;continue}}if(r.m){if("^"===s[e]){a+=`(^|(?<=[\r
]))`;continue}if("$"===s[e]){a+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===s[e]){a+=n?`${s[e]}\r
`:`[${s[e]}\r
]`;continue}a+=s[e],"\\"===s[e]?i=!0:n&&"]"===s[e]?n=!1:n||"["!==s[e]||(n=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function j(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===d.pA.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,s)=>({...r,[s]:$(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",s]})??{}}),{}),additionalProperties:!1};let r={type:"object",additionalProperties:$(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===d.pA.ZodString&&e.keyType._def.checks?.length){let{type:s,...a}=z(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===d.pA.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===d.pA.ZodBranded&&e.keyType._def.type._def.typeName===d.pA.ZodString&&e.keyType._def.type._def.checks?.length){let{type:s,...a}=g(e.keyType._def,t);return{...r,propertyNames:a}}return r}let A={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},S=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>$(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0},C=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return $(e.innerType._def,t);let r=$(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},q=(e,t)=>{if("input"===t.pipeStrategy)return $(e.in._def,t);if("output"===t.pipeStrategy)return $(e.out._def,t);let r=$(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),s=$(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,s].filter(e=>void 0!==e)}},T=(e,t)=>$(e.innerType._def,t);function $(e,t,r=!1){let s=t.seen.get(e);if(t.override){let a=t.override?.(e,t,s,r);if(a!==l)return a}if(s&&!r){let e=R(s,t);if(void 0!==e)return e}let a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);let i=H(e,e.typeName,t);return i&&Z(e,t,i),a.jsonSchema=i,i}let R=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:E(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{};return"seen"===t.$refStrategy?{}:void 0}},E=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},H=(e,t,r)=>{switch(t){case d.pA.ZodString:return z(e,r);case d.pA.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let s of e.checks)switch(s.kind){case"int":r.type="integer",m(r,"type",s.message,t);break;case"min":"jsonSchema7"===t.target?s.inclusive?h(r,"minimum",s.value,s.message,t):h(r,"exclusiveMinimum",s.value,s.message,t):(s.inclusive||(r.exclusiveMinimum=!0),h(r,"minimum",s.value,s.message,t));break;case"max":"jsonSchema7"===t.target?s.inclusive?h(r,"maximum",s.value,s.message,t):h(r,"exclusiveMaximum",s.value,s.message,t):(s.inclusive||(r.exclusiveMaximum=!0),h(r,"maximum",s.value,s.message,t));break;case"multipleOf":h(r,"multipleOf",s.value,s.message,t)}return r}(e,r);case d.pA.ZodObject:return function(e,t){let r="openAi"===t.target,s={type:"object",...Object.entries(e.shape()).reduce((e,[s,a])=>{if(void 0===a||void 0===a._def)return e;let i=a.isOptional();i&&r&&(a instanceof d.ak&&(a=a._def.innerType),a.isNullable()||(a=a.nullable()),i=!1);let n=$(a._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});return void 0===n?e:{properties:{...e.properties,[s]:n},required:i?e.required:[...e.required,s]}},{properties:{},required:[]}),additionalProperties:"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:$(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:$(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0};return s.required.length||delete s.required,s}(e,r);case d.pA.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let s of e.checks)switch(s.kind){case"min":"jsonSchema7"===t.target?s.inclusive?h(r,"minimum",s.value,s.message,t):h(r,"exclusiveMinimum",s.value,s.message,t):(s.inclusive||(r.exclusiveMinimum=!0),h(r,"minimum",s.value,s.message,t));break;case"max":"jsonSchema7"===t.target?s.inclusive?h(r,"maximum",s.value,s.message,t):h(r,"exclusiveMaximum",s.value,s.message,t):(s.inclusive||(r.exclusiveMaximum=!0),h(r,"maximum",s.value,s.message,t));break;case"multipleOf":h(r,"multipleOf",s.value,s.message,t)}return r}(e,r);case d.pA.ZodBoolean:return{type:"boolean"};case d.pA.ZodDate:return function e(t,r,s){let a=s??r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((s,a)=>e(t,r,s))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return v(t,r)}}(e,r);case d.pA.ZodUndefined:return{not:{}};case d.pA.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case d.pA.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==d.pA.ZodAny&&(r.items=$(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&h(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&h(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(h(r,"minItems",e.exactLength.value,e.exactLength.message,t),h(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case d.pA.ZodUnion:case d.pA.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return S(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in A&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=A[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return S(e,t)}(e,r);case d.pA.ZodIntersection:return function(e,t){let r=[$(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),$(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),s="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if(b(e))a.push(...e.allOf),void 0===e.unevaluatedProperties&&(s=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...s}=e;t=s}else s=void 0;a.push(t)}}),a.length?{allOf:a,...s}:void 0}(e,r);case d.pA.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>$(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:$(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>$(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case d.pA.ZodRecord:return j(e,r);case d.pA.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case d.pA.ZodEnum:return{type:"string",enum:Array.from(e.values)};case d.pA.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),s=Array.from(new Set(r.map(e=>typeof e)));return{type:1===s.length?"string"===s[0]?"string":"number":["string","number"],enum:r}}(e);case d.pA.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:A[e.innerType._def.typeName],nullable:!0}:{type:[A[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=$(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=$(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case d.pA.ZodOptional:return C(e,r);case d.pA.ZodMap:return"record"===r.mapStrategy?j(e,r):{type:"array",maxItems:125,items:{type:"array",items:[$(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||{},$(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case d.pA.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:$(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&h(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&h(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case d.pA.ZodLazy:return $(e.getter()._def,r);case d.pA.ZodPromise:return $(e.type._def,r);case d.pA.ZodNaN:case d.pA.ZodNever:return{not:{}};case d.pA.ZodEffects:return"input"===r.effectStrategy?$(e.schema._def,r):{};case d.pA.ZodAny:case d.pA.ZodUnknown:return{};case d.pA.ZodDefault:return{...$(e.innerType._def,r),default:e.defaultValue()};case d.pA.ZodBranded:return g(e,r);case d.pA.ZodReadonly:return T(e,r);case d.pA.ZodCatch:return f(e,r);case d.pA.ZodPipeline:return q(e,r);case d.pA.ZodFunction:case d.pA.ZodVoid:case d.pA.ZodSymbol:default:return}},Z=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),I=(e,t)=>{let r=p(t),s="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,s])=>({...e,[t]:$(s._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}}),{}):void 0,a="string"==typeof t?t:t?.nameStrategy==="title"?void 0:t?.name,i=$(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??{},n="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==n&&(i.title=n);let o=void 0===a?s?{...i,[r.definitionPath]:s}:i:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...s,[a]:i}};return"jsonSchema7"===r.target?o.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===r.target||"openAi"===r.target)&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};(a||(a={})).Completable="McpCompletable";class M extends d.DI{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}M.create=(e,t)=>new M({type:e,typeName:a.Completable,complete:t.complete,...function(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var i,n;let{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(i=null!=o?o:s)&&void 0!==i?i:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(n=null!=o?o:r)&&void 0!==n?n:a.defaultError}},description:a}}(t)});class O{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new o(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(n.Cg.shape.method.value),this.server.assertCanSetRequestHandler(n.zN.shape.method.value),this.server.registerCapabilities({tools:{}}),this.server.setRequestHandler(n.Cg,()=>({tools:Object.entries(this._registeredTools).map(([e,t])=>({name:e,description:t.description,inputSchema:t.inputSchema?I(t.inputSchema):N}))})),this.server.setRequestHandler(n.zN,async(e,t)=>{let r=this._registeredTools[e.params.name];if(!r)throw new n.yp(n.jK.InvalidParams,`Tool ${e.params.name} not found`);if(r.inputSchema){let s=await r.inputSchema.safeParseAsync(e.params.arguments);if(!s.success)throw new n.yp(n.jK.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${s.error.message}`);let a=s.data,i=r.callback;try{return await Promise.resolve(i(a,t))}catch(e){return{content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}else{let e=r.callback;try{return await Promise.resolve(e(t))}catch(e){return{content:[{type:"text",text:e instanceof Error?e.message:String(e)}],isError:!0}}}}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(n.t2.shape.method.value),this.server.setRequestHandler(n.t2,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new n.yp(n.jK.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let r=this._registeredPrompts[t.name];if(!r)throw new n.yp(n.jK.InvalidParams,`Prompt ${e.params.ref.name} not found`);if(!r.argsSchema)return F;let s=r.argsSchema.shape[e.params.argument.name];if(!(s instanceof M))return F;let a=s._def;return L(await a.complete(e.params.argument.value))}async handleResourceCompletion(e,t){let r=Object.values(this._registeredResourceTemplates).find(e=>e.resourceTemplate.uriTemplate.toString()===t.uri);if(!r){if(this._registeredResources[t.uri])return F;throw new n.yp(n.jK.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let s=r.resourceTemplate.completeCallback(e.params.argument.name);return s?L(await s(e.params.argument.value)):F}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(n.FO.shape.method.value),this.server.assertCanSetRequestHandler(n.Q$.shape.method.value),this.server.assertCanSetRequestHandler(n.Jx.shape.method.value),this.server.registerCapabilities({resources:{}}),this.server.setRequestHandler(n.FO,async(e,t)=>{let r=Object.entries(this._registeredResources).map(([e,t])=>({uri:e,name:t.name,...t.metadata})),s=[];for(let e of Object.values(this._registeredResourceTemplates))if(e.resourceTemplate.listCallback)for(let r of(await e.resourceTemplate.listCallback(t)).resources)s.push({...r,...e.metadata});return{resources:[...r,...s]}}),this.server.setRequestHandler(n.Q$,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([e,t])=>({name:e,uriTemplate:t.resourceTemplate.uriTemplate.toString(),...t.metadata}))})),this.server.setRequestHandler(n.Jx,async(e,t)=>{let r=new URL(e.params.uri),s=this._registeredResources[r.toString()];if(s)return s.readCallback(r,t);for(let e of Object.values(this._registeredResourceTemplates)){let s=e.resourceTemplate.uriTemplate.match(r.toString());if(s)return e.readCallback(r,s,t)}throw new n.yp(n.jK.InvalidParams,`Resource ${r} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(n.kQ.shape.method.value),this.server.assertCanSetRequestHandler(n.av.shape.method.value),this.server.registerCapabilities({prompts:{}}),this.server.setRequestHandler(n.kQ,()=>({prompts:Object.entries(this._registeredPrompts).map(([e,t])=>({name:e,description:t.description,arguments:t.argsSchema?Object.entries(t.argsSchema.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()})):void 0}))})),this.server.setRequestHandler(n.av,async(e,t)=>{let r=this._registeredPrompts[e.params.name];if(!r)throw new n.yp(n.jK.InvalidParams,`Prompt ${e.params.name} not found`);if(r.argsSchema){let s=await r.argsSchema.safeParseAsync(e.params.arguments);if(!s.success)throw new n.yp(n.jK.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${s.error.message}`);let a=s.data,i=r.callback;return await Promise.resolve(i(a,t))}{let e=r.callback;return await Promise.resolve(e(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...r){let s;"object"==typeof r[0]&&(s=r.shift());let a=r[0];if("string"==typeof t){if(this._registeredResources[t])throw Error(`Resource ${t} is already registered`);this._registeredResources[t]={name:e,metadata:s,readCallback:a}}else{if(this._registeredResourceTemplates[e])throw Error(`Resource template ${e} is already registered`);this._registeredResourceTemplates[e]={resourceTemplate:t,metadata:s,readCallback:a}}this.setResourceRequestHandlers()}tool(e,...t){let r,s;if(this._registeredTools[e])throw Error(`Tool ${e} is already registered`);"string"==typeof t[0]&&(r=t.shift()),t.length>1&&(s=t.shift());let a=t[0];this._registeredTools[e]={description:r,inputSchema:void 0===s?void 0:d.z.object(s),callback:a},this.setToolRequestHandlers()}prompt(e,...t){let r,s;if(this._registeredPrompts[e])throw Error(`Prompt ${e} is already registered`);"string"==typeof t[0]&&(r=t.shift()),t.length>1&&(s=t.shift());let a=t[0];this._registeredPrompts[e]={description:r,argsSchema:void 0===s?void 0:d.z.object(s),callback:a},this.setPromptRequestHandlers()}}let N={type:"object"};function L(e){return{completion:{values:e.slice(0,100),total:e.length,hasMore:e.length>100}}}let F={completion:{values:[],hasMore:!1}}},72982:function(e,t,r){r.d(t,{b$:function(){return a},kK:function(){return i}});var s=r(65654);class a{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this.setNotificationHandler(s.MH,e=>{let t=this._requestHandlerAbortControllers.get(e.params.requestId);null==t||t.abort(e.params.reason)}),this.setNotificationHandler(s.gD,e=>{this._onprogress(e)}),this.setRequestHandler(s.EO,e=>({}))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=e=>{this._onerror(e)},this._transport.onmessage=e=>{"method"in e?"id"in e?this._onrequest(e):this._onnotification(e):this._onresponse(e)},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);let r=new s.yp(s.jK.ConnectionClosed,"Connection closed");for(let e of t.values())e(r)}_onerror(e){var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}_onnotification(e){var t;let r=null!==(t=this._notificationHandlers.get(e.method))&&void 0!==t?t:this.fallbackNotificationHandler;void 0!==r&&Promise.resolve().then(()=>r(e)).catch(e=>this._onerror(Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e){var t,r;let a=null!==(t=this._requestHandlers.get(e.method))&&void 0!==t?t:this.fallbackRequestHandler;if(void 0===a){null===(r=this._transport)||void 0===r||r.send({jsonrpc:"2.0",id:e.id,error:{code:s.jK.MethodNotFound,message:"Method not found"}}).catch(e=>this._onerror(Error(`Failed to send an error response: ${e}`)));return}let i=new AbortController;this._requestHandlerAbortControllers.set(e.id,i),Promise.resolve().then(()=>a(e,{signal:i.signal})).then(t=>{var r;if(!i.signal.aborted)return null===(r=this._transport)||void 0===r?void 0:r.send({result:t,jsonrpc:"2.0",id:e.id})},t=>{var r,a;if(!i.signal.aborted)return null===(r=this._transport)||void 0===r?void 0:r.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:s.jK.InternalError,message:null!==(a=t.message)&&void 0!==a?a:"Internal error"}})}).catch(e=>this._onerror(Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,s=this._progressHandlers.get(Number(t));if(void 0===s){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}s(r)}_onresponse(e){let t=e.id,r=this._responseHandlers.get(Number(t));if(void 0===r){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}this._responseHandlers.delete(Number(t)),this._progressHandlers.delete(Number(t)),r("result"in e?e:new s.yp(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){var e;await (null===(e=this._transport)||void 0===e?void 0:e.close())}request(e,t,r){return new Promise((a,i)=>{var n,o,l,u;let c;if(!this._transport){i(Error("Not connected"));return}(null===(n=this._options)||void 0===n?void 0:n.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),null===(o=null==r?void 0:r.signal)||void 0===o||o.throwIfAborted();let p=this._requestMessageId++,d={...e,jsonrpc:"2.0",id:p};(null==r?void 0:r.onprogress)&&(this._progressHandlers.set(p,r.onprogress),d.params={...e.params,_meta:{progressToken:p}}),this._responseHandlers.set(p,e=>{var s;if(void 0!==c&&clearTimeout(c),null===(s=null==r?void 0:r.signal)||void 0===s||!s.aborted){if(e instanceof Error)return i(e);try{let r=t.parse(e.result);a(r)}catch(e){i(e)}}});let m=e=>{var t;this._responseHandlers.delete(p),this._progressHandlers.delete(p),null===(t=this._transport)||void 0===t||t.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:p,reason:String(e)}}).catch(e=>this._onerror(Error(`Failed to send cancellation: ${e}`))),i(e)};null===(l=null==r?void 0:r.signal)||void 0===l||l.addEventListener("abort",()=>{var e;void 0!==c&&clearTimeout(c),m(null===(e=null==r?void 0:r.signal)||void 0===e?void 0:e.reason)});let h=null!==(u=null==r?void 0:r.timeout)&&void 0!==u?u:6e4;c=setTimeout(()=>m(new s.yp(s.jK.RequestTimeout,"Request timed out",{timeout:h})),h),this._transport.send(d).catch(e=>{void 0!==c&&clearTimeout(c),i(e)})})}async notification(e){if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(e.method);let t={...e,jsonrpc:"2.0"};await this._transport.send(t)}setRequestHandler(e,t){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,s)=>Promise.resolve(t(e.parse(r),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}}function i(e,t){return Object.entries(t).reduce((e,[t,r])=>(r&&"object"==typeof r?e[t]=e[t]?{...e[t],...r}:r:e[t]=r,e),{...e})}},65654:function(e,t,r){r.d(t,{Bi:function(){return eP},CD:function(){return F},Cg:function(){return eo},EE:function(){return A},EO:function(){return C},FO:function(){return O},GR:function(){return eu},Gd:function(){return el},Go:function(){return ea},Jx:function(){return K},M$:function(){return ec},MH:function(){return x},Ol:function(){return N},P7:function(){return n},Q$:function(){return L},Zs:function(){return _},_z:function(){return k},aZ:function(){return S},av:function(){return Y},b5:function(){return eg},dn:function(){return ez},e5:function(){return o},ev:function(){return X},gD:function(){return T},jK:function(){return a},kO:function(){return ey},kQ:function(){return W},lD:function(){return eA},s6:function(){return z},t2:function(){return ew},vg:function(){return V},yp:function(){return eC},zN:function(){return ep}});var s,a,i=r(41270);let n="2024-11-05",o=[n,"2024-10-07"],l=i.z.union([i.z.string(),i.z.number().int()]),u=i.z.string(),c=i.z.object({_meta:i.z.optional(i.z.object({progressToken:i.z.optional(l)}).passthrough())}).passthrough(),p=i.z.object({method:i.z.string(),params:i.z.optional(c)}),d=i.z.object({_meta:i.z.optional(i.z.object({}).passthrough())}).passthrough(),m=i.z.object({method:i.z.string(),params:i.z.optional(d)}),h=i.z.object({_meta:i.z.optional(i.z.object({}).passthrough())}).passthrough(),g=i.z.union([i.z.string(),i.z.number().int()]),f=i.z.object({jsonrpc:i.z.literal("2.0"),id:g}).merge(p).strict(),v=i.z.object({jsonrpc:i.z.literal("2.0")}).merge(m).strict(),b=i.z.object({jsonrpc:i.z.literal("2.0"),id:g,result:h}).strict();(s=a||(a={}))[s.ConnectionClosed=-32e3]="ConnectionClosed",s[s.RequestTimeout=-32001]="RequestTimeout",s[s.ParseError=-32700]="ParseError",s[s.InvalidRequest=-32600]="InvalidRequest",s[s.MethodNotFound=-32601]="MethodNotFound",s[s.InvalidParams=-32602]="InvalidParams",s[s.InternalError=-32603]="InternalError";let y=i.z.object({jsonrpc:i.z.literal("2.0"),id:g,error:i.z.object({code:i.z.number().int(),message:i.z.string(),data:i.z.optional(i.z.unknown())})}).strict(),z=i.z.union([f,v,b,y]),_=h.strict(),x=m.extend({method:i.z.literal("notifications/cancelled"),params:d.extend({requestId:g,reason:i.z.string().optional()})}),w=i.z.object({name:i.z.string(),version:i.z.string()}).passthrough(),P=i.z.object({experimental:i.z.optional(i.z.object({}).passthrough()),sampling:i.z.optional(i.z.object({}).passthrough()),roots:i.z.optional(i.z.object({listChanged:i.z.optional(i.z.boolean())}).passthrough())}).passthrough(),k=p.extend({method:i.z.literal("initialize"),params:c.extend({protocolVersion:i.z.string(),capabilities:P,clientInfo:w})}),j=i.z.object({experimental:i.z.optional(i.z.object({}).passthrough()),logging:i.z.optional(i.z.object({}).passthrough()),prompts:i.z.optional(i.z.object({listChanged:i.z.optional(i.z.boolean())}).passthrough()),resources:i.z.optional(i.z.object({subscribe:i.z.optional(i.z.boolean()),listChanged:i.z.optional(i.z.boolean())}).passthrough()),tools:i.z.optional(i.z.object({listChanged:i.z.optional(i.z.boolean())}).passthrough())}).passthrough(),A=h.extend({protocolVersion:i.z.string(),capabilities:j,serverInfo:w,instructions:i.z.optional(i.z.string())}),S=m.extend({method:i.z.literal("notifications/initialized")}),C=p.extend({method:i.z.literal("ping")}),q=i.z.object({progress:i.z.number(),total:i.z.optional(i.z.number())}).passthrough(),T=m.extend({method:i.z.literal("notifications/progress"),params:d.merge(q).extend({progressToken:l})}),$=p.extend({params:c.extend({cursor:i.z.optional(u)}).optional()}),R=h.extend({nextCursor:i.z.optional(u)}),E=i.z.object({uri:i.z.string(),mimeType:i.z.optional(i.z.string())}).passthrough(),H=E.extend({text:i.z.string()}),Z=E.extend({blob:i.z.string().base64()}),I=i.z.object({uri:i.z.string(),name:i.z.string(),description:i.z.optional(i.z.string()),mimeType:i.z.optional(i.z.string())}).passthrough(),M=i.z.object({uriTemplate:i.z.string(),name:i.z.string(),description:i.z.optional(i.z.string()),mimeType:i.z.optional(i.z.string())}).passthrough(),O=$.extend({method:i.z.literal("resources/list")}),N=R.extend({resources:i.z.array(I)}),L=$.extend({method:i.z.literal("resources/templates/list")}),F=R.extend({resourceTemplates:i.z.array(M)}),K=p.extend({method:i.z.literal("resources/read"),params:c.extend({uri:i.z.string()})}),V=h.extend({contents:i.z.array(i.z.union([H,Z]))}),D=m.extend({method:i.z.literal("notifications/resources/list_changed")}),U=p.extend({method:i.z.literal("resources/subscribe"),params:c.extend({uri:i.z.string()})}),B=p.extend({method:i.z.literal("resources/unsubscribe"),params:c.extend({uri:i.z.string()})}),Q=m.extend({method:i.z.literal("notifications/resources/updated"),params:d.extend({uri:i.z.string()})}),J=i.z.object({name:i.z.string(),description:i.z.optional(i.z.string()),required:i.z.optional(i.z.boolean())}).passthrough(),G=i.z.object({name:i.z.string(),description:i.z.optional(i.z.string()),arguments:i.z.optional(i.z.array(J))}).passthrough(),W=$.extend({method:i.z.literal("prompts/list")}),X=R.extend({prompts:i.z.array(G)}),Y=p.extend({method:i.z.literal("prompts/get"),params:c.extend({name:i.z.string(),arguments:i.z.optional(i.z.record(i.z.string()))})}),ee=i.z.object({type:i.z.literal("text"),text:i.z.string()}).passthrough(),et=i.z.object({type:i.z.literal("image"),data:i.z.string().base64(),mimeType:i.z.string()}).passthrough(),er=i.z.object({type:i.z.literal("resource"),resource:i.z.union([H,Z])}).passthrough(),es=i.z.object({role:i.z.enum(["user","assistant"]),content:i.z.union([ee,et,er])}).passthrough(),ea=h.extend({description:i.z.optional(i.z.string()),messages:i.z.array(es)}),ei=m.extend({method:i.z.literal("notifications/prompts/list_changed")}),en=i.z.object({name:i.z.string(),description:i.z.optional(i.z.string()),inputSchema:i.z.object({type:i.z.literal("object"),properties:i.z.optional(i.z.object({}).passthrough())}).passthrough()}).passthrough(),eo=$.extend({method:i.z.literal("tools/list")}),el=R.extend({tools:i.z.array(en)}),eu=h.extend({content:i.z.array(i.z.union([ee,et,er])),isError:i.z.boolean().default(!1).optional()}),ec=eu.or(h.extend({toolResult:i.z.unknown()})),ep=p.extend({method:i.z.literal("tools/call"),params:c.extend({name:i.z.string(),arguments:i.z.optional(i.z.record(i.z.unknown()))})}),ed=m.extend({method:i.z.literal("notifications/tools/list_changed")}),em=i.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),eh=p.extend({method:i.z.literal("logging/setLevel"),params:c.extend({level:em})}),eg=m.extend({method:i.z.literal("notifications/message"),params:d.extend({level:em,logger:i.z.optional(i.z.string()),data:i.z.unknown()})}),ef=i.z.object({name:i.z.string().optional()}).passthrough(),ev=i.z.object({hints:i.z.optional(i.z.array(ef)),costPriority:i.z.optional(i.z.number().min(0).max(1)),speedPriority:i.z.optional(i.z.number().min(0).max(1)),intelligencePriority:i.z.optional(i.z.number().min(0).max(1))}).passthrough(),eb=i.z.object({role:i.z.enum(["user","assistant"]),content:i.z.union([ee,et])}).passthrough(),ey=p.extend({method:i.z.literal("sampling/createMessage"),params:c.extend({messages:i.z.array(eb),systemPrompt:i.z.optional(i.z.string()),includeContext:i.z.optional(i.z.enum(["none","thisServer","allServers"])),temperature:i.z.optional(i.z.number()),maxTokens:i.z.number().int(),stopSequences:i.z.optional(i.z.array(i.z.string())),metadata:i.z.optional(i.z.object({}).passthrough()),modelPreferences:i.z.optional(ev)})}),ez=h.extend({model:i.z.string(),stopReason:i.z.optional(i.z.enum(["endTurn","stopSequence","maxTokens"]).or(i.z.string())),role:i.z.enum(["user","assistant"]),content:i.z.discriminatedUnion("type",[ee,et])}),e_=i.z.object({type:i.z.literal("ref/resource"),uri:i.z.string()}).passthrough(),ex=i.z.object({type:i.z.literal("ref/prompt"),name:i.z.string()}).passthrough(),ew=p.extend({method:i.z.literal("completion/complete"),params:c.extend({ref:i.z.union([ex,e_]),argument:i.z.object({name:i.z.string(),value:i.z.string()}).passthrough()})}),eP=h.extend({completion:i.z.object({values:i.z.array(i.z.string()).max(100),total:i.z.optional(i.z.number().int()),hasMore:i.z.optional(i.z.boolean())}).passthrough()}),ek=i.z.object({uri:i.z.string().startsWith("file://"),name:i.z.optional(i.z.string())}).passthrough(),ej=p.extend({method:i.z.literal("roots/list")}),eA=h.extend({roots:i.z.array(ek)}),eS=m.extend({method:i.z.literal("notifications/roots/list_changed")});i.z.union([C,k,ew,eh,Y,W,O,L,K,U,B,ep,eo]),i.z.union([x,T,S,eS]),i.z.union([_,ez,eA]),i.z.union([C,ey,ej]),i.z.union([x,T,eg,Q,D,ed,ei]),i.z.union([_,A,eP,ea,X,N,F,V,eu,el]);class eC extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r}}}}]);